let bodyParser = require('body-parser');
let verifyToken = require('../auth/verifyToken');

module.exports = function(app){
    // parse out json and app can handle url requests
    app.use(bodyParser.json());
    app.use(bodyParser.urlencoded({extended: true}));

    /**
     * API: GET
     * Access: Home
     * View: index, signin
     * Required: auth token
     * @param {userID, claim} verifyToken
     * @param {firstname, department} res
     */

    app.get('/', verifyToken, function(req, res){
        res.header('Cache-Control', 'private, no-cache, no-store, must-revalidate');
        res.header('Expires', '-1');
        res.header('Pragma', 'no-cache');

        if(req.userID && req.claim){
            res.render('index', {firstname: req.claim.firstname || req.claim.given_name, department: req.claim.department});
        } else {
            res.render('signin');
        }

    });

    /** Sign up page */
    app.get('/signup', function(req, res){
        res.render('signup');
    });



}